name: Execute Performace Test

on:
  #push:
  #  branches:
  #    - master
  pull_request:
    types: [ closed ]
    branches: [ performance ]

env:
  sendEmail: true

jobs:
  action_build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Run JMeter Action on a test
        uses: rbhadti94/apache-jmeter-action@v0.5.0
        with:
          testFilePath: ops/testDemo.jmx
          outputReportsFolder: ops/reports/JMeter/
          args: "--loglevel INFO"
     
      
      - uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: Jmeter Report
          file_pattern: 'reports/JMeter/statistics.json'
          repository: .
